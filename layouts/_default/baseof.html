<!DOCTYPE html>
<html lang="{{ or site.Language.LanguageCode site.Language.Lang }}"
  dir="{{ or site.Language.LanguageDirection `ltr` }}">

  <head>
    {{ partial "head.html" . }}
  </head>

  {{ $theme := "auto"}}

  {{ with .Param "theme" }}
  {{ $theme = .}}
  {{ end }}

  <body class="bg-white max-w-4xl m-auto">

    <header>
      {{ partial "header.html" . }}
    </header>
    <div class="container content px-4 md:px-12 pt-0 bg-white">
    <hr>
    </div>
    <main class="main">
      {{ block "main" . }}{{ end }}
    </main>

  <footer>
    {{ partial "footer.html" . }}
  </footer>

  </body>

  <script>

  function isAuto() {
    return document.body.classList.contains("auto");
  }

  function setTheme() {
    if (!isAuto()) {
      return
    }

    document.body.classList.remove("auto");
    let cls = "light";
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
      cls = "dark";
    }

    document.body.classList.add(cls);
  }

  function invertBody() {
    document.body.classList.toggle("dark");
    document.body.classList.toggle("light");
  }

  if (isAuto()) {
    window.matchMedia('(prefers-color-scheme: dark)').addListener(invertBody);
  }

  setTheme();

</script>

</html>